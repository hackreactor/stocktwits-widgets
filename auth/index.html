<!doctype html>
<html>
  <body>
    <script>
      (function (clientId) {
        var accessTokenIndex = window.location.hash.indexOf('access_token='),
            accessToken      = ~accessTokenIndex && window.location.hash.substr(accessTokenIndex + 13);

        if (accessToken) {
          // Window opener needs to have a function that can receive the access token update
          window.opener.accessToken(accessToken);
          window.close();
        } else {
          // Redirect to StockTwits for authentication
          window.location = 'https://api.stocktwits.com/api/2/oauth/authorize?client_id=' + clientId + '&response_type=token&redirect_uri=' + window.location.href + '&scope=read,watch_lists,publish_messages,publish_watch_lists,follow_users,follow_stocks';
        }
      })('1b7d3f7654fde607');
    </script>
  </body>
</html>
